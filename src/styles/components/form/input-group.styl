.input-group
    $grey = $ms-colors['grey']['l1'];
    $primary = $ms-theme['primary']['base']
    $error = $ms-theme['error']['base']

    display block
    width 100%
    margin 1.618em 0

    &__input
        display: flex
        flex-direction: row
        flex-wrap: nowrap
        position relative
        width 100%

        .input
            &__append-icon
            &__prepend-icon
                flex 0 1.5em
                font-size: 1.5em
                vertical-align: bottom

            &__prepend-icon
               position relative
               top .05em
               opacity .5

            &__append-icon
                position absolute
                right 0
                opacity .25

        input, textarea
            flex 0 100%
            width 100%
            border none
            background none
            border-bottom .08em solid $grey;
            font inherit
            margin 0
            padding .15em 0
            min-height 1.8em

        textarea
            resize: vertical

        label
            position absolute
            top .25em
            left 2.185em
            color rgba(#000, 50%)
            transform-origin 0 100%
            transition all .21s $transition['swing'];
            user-select: none

    &__details
        padding .25em 0 0 0
        margin 0 0 0 2.685em
        font-size: .8em
        min-height: 1.618em
        position relative
        &:before
            content ''
            display block
            position absolute
            top -.08em
            left 0
            transition all .21s $transition['swing'];
            border-top .19em solid $primary;
            width 0
            height 0

        .input-group__error
            color $error

    &--focused, &--dirty
        & ^[0]__input
            label
                transform scale(.8) translate(0, -150%)

    // Required
    &--required
        & ^[0]__input label:after
            content "*"
            color $error

    // Focus
    &--focused
        &  ^[0]__input
            label
                color $primary

            .input
                &__prepend-icon
                    color $primary
                    opacity 1
                &__append-icon
                    opacity .5

        & ^[0]__details:before
            width 100%
    // Error
    &--has-error
        &  ^[0]__input
            
            label
                color $error !important

            input, textarea
                border-color $error !important


        & ^[0]__details:before
            border-color $error

    for $name, $color in $ms-theme
        $ignore = 'primary' 'error'
        $color = $color['base'];

        &--{$name}
            
            & ^[0]__details:before
                border-color $color

            &^[0]--focused
                &  ^[0]__input
                        label
                        .input__prepend-icon
                            color $color

                

