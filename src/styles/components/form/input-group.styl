.input-group
    $grey = $ms-colors['grey']['b'];
    $grey_light = $ms-colors['grey']['l1'];
    $grey_dark = $ms-colors['grey']['d2'];
    $primary = $ms-theme['primary']['base']
    $error = $ms-theme['error']['base']
    $trans = all .3s $transition['fast-in-fast-out']

    display flex
    flex-flow: row nowrap
    width 100%
    margin 1.5em 0

    input, textarea
        flex 1
        display block
        border none
        background none
        font inherit
        margin 0
        color $grey_dark

    input, textarea
    .input--prefix
    .input--suffix
        padding .25em 0
        min-height 1.5em
        cursor: text

    .input--
        &prefix
        &suffix
            opacity .5
            transition $trans
            user-select: none

    textarea
        resize vertical
        flex 0 100%

    .input__label
        position absolute
        top .25em
        left 0
        color $grey
        transform-origin 0 100%
        transition $trans;
        user-select: none
        pointer-events: none
        z-index: 4
        width: 100%

        & ~ .input--
            &prefix
            &suffix
                opacity 0

    .input
        &__
            &append-icon
            &prepend-icon
                flex 0 auto
                font-size: 1.5em
                color #000

            &icon-cb
                cursor: pointer
                transition $trans;

                &:hover
                    opacity: .5

            &prepend-icon
                opacity .5
                text-align left
                padding .08em .25em 0 0

            &append-icon
                opacity .25
                text-align right
                padding-left: .25em

        &--
            &prefix
                padding-right .25em
            &suffix
                padding-left .25em

    &__wrapper
        display flex
        flex-flow: row wrap
        flex 1

    &__input
        display: flex
        flex-flow: row nowrap
        position: relative
        flex: 1

    &__details
        display block
        padding .25em 0 0 0
        margin 0
        font-size: .8em
        min-height: 1.618em
        position relative
        flex 1
        flex-basis: 100%;
        width 100%
        border-top .08em solid $grey;
        
        &:before
            content ''
            display block
            position absolute
            top -.08em
            left 0
            transition $trans;
            border-top .19em solid $primary;
            width 0
            height 0

        .input-group__error
            color $error

    &__counter
        float right
        opacity 0
        &--error
            color $error
            opacity 1

    &--focused, &--dirty
        .input__label
            transform scale(.8) translate(0, -150%)
            & ~ .input
                &--prefix
                &--suffix
                    opacity .5
            

    // Disabled
    &--disabled
        opacity: .75

        input, textarea
        .input--prefix
        .input--suffix
            cursor: default

        & ^[0]
            &__details
                border-top-style: none

                &:before
                    content: ''
                    position: absolute
                    left: 0
                    top: 0
                    height: 1px
                    width: 100%
                    z-index: 0
                    border-color: transparent
                    background-color: transparent
                    background-image: radial-gradient(circle, rgba(#000, 33%) 40%, transparent 50%);
                    background-position: bottom
                    background-size: 4px 1px
                    background-repeat: repeat-x

    // Alignment
    &--center
        .input__label
            transform-origin: 50% 100%
            text-align: center

        input, textarea
            text-align: center
        
    &--right
        .input__label
            transform-origin: 100% 100%
            text-align: right

        input, textarea
            text-align: right

    // Required
    &--required
        & ^[0]__input .input__label:after
            content "*"
            color $error

    // Focus
    &--focused
        input, textarea
            color #000

        .input__
            &label
                color $primary
            &prepend-icon
                color $primary
                opacity 1

            &append-icon
                opacity .5

        & ^[0]
            &__details:before
                width 100%
            &__counter
                opacity 1
    // Error
    &--has-error
        .input__label
            color $error !important

        & ^[0]__details
            border-color $error

            &:before
                border-color $error

    for $name, $color in $ms-theme
        $ignore = 'primary' 'error'
        $color = $color['base'];

        &--{$name}
            
            & ^[0]__details:before
                border-color $color

            &^[0]--focused
                .input__
                    &label
                    &prepend-icon
                        color $color
                        opacity 1

                

